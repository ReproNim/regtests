<!--
TODO:
  - Decide what should be included in the dashboard.
  - Remove bootstrap as a dependency. This page should be simple, and
      responsiveness on mobile is not really a concern.
  - Save test result data within this file. This file should not have any
      dependencies that cannot be fulfilled via a CDN.
-->

<!DOCTYPE html>
<html lang="en">
  <meta charset="utf-8">
  <head>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/css/bootstrap.min.css" integrity="sha384-Zug+QiDoJOrZ5t4lssLdxGhVrurbmBWopoEl+M6BdEfwnCJZtKxi1KgxUyJq13dy" crossorigin="anonymous">
    <style>
      body, .bg-onedark { background: hsl(220, 13%, 18%); }

      h1, h2, h3, li, p, text {
        color: rgb(197,202,211);
      }
      .padding-0 { padding-left: 0; padding-right: 0; }
      .parcoords > canvas {
        position: absolute;
        pointer-events: none;
      }
      .parcoords text {
        font: 16px sans-serif;
        fill: rgb(197,202,211);
      }
      .parcoords text.label {
        font: 18px sans-serif;
      }
      .parcoords canvas {
        opacity: 1;
        transition: opacity 0.3s;
        -moz-transition: opacity 0.3s;
        -webkit-transition: opacity 0.3s;
        -o-transition: opacity 0.3s;
      }
      .parcoords canvas.faded {
        opacity: 0.25;
      }
      .parcoords {
        height: 350px;
        width: 100%;
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        -khtml-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
      }
      .top-buffer {
        padding-top: 50px;
      }

    </style>
  </head>

  <body>
    <nav class="navbar navbar-default navbar-fixed-top">
      <h1 class="navbar-brand">ReproNim Robustness Test Results</h1>
    </nav>

    <div id="parcoordplot" class="parcoords bg-onedark"></div>

    <div id="Summary" class="top-buffer">
      <h2>Summary</h2>
      <p>Include general descriptive statistics about the tests run.</p>
      <ul>
        <li>Number of tests run (#passed, #failed, #error)</li>
        <li>Information on runtime? (amount of time taken, etc)</li>
      </ul>
    </div>

    <div id="Plots">
      <h2>Plots</h2>
      <ul>
        <li>Where relevant, include plots of results. For example, brain volume per environment.</li>
      </ul>
    </div>


    <script src="https://d3js.org/d3.v3.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/parcoords/0.7.0/d3.parcoords.js"></script>
    <script>

      let colors = {
        pass: "green",
        fail: "red",
        error: "gray",
      }

      let data = [{
      	"base": "debian:stretch",
      	"python": "2.7",
      	"result": "FAIL"
      }, {
      	"base": "debian:stretch",
      	"python": "3.5",
      	"result": "PASS"
      }, {
      	"base": "debian:stretch",
      	"python": "3.6",
      	"result": "PASS"
      }, {
      	"base": "ubuntu:17.04",
      	"python": "2.7",
      	"result": "FAIL"
      }, {
      	"base": "ubuntu:17.04",
      	"python": "3.5",
      	"result": "PASS"
      }, {
      	"base": "ubuntu:17.04",
      	"python": "3.6",
      	"result": "PASS"
      }]


      function colorByResult(result) {
        return colors[result.toLowerCase()]
      }

      plot = d3.parcoords()("#parcoordplot")
        .data(data)
        .color(function(d) {return colorByResult(d.result)})
        .render()
        .createAxes()
        .brushMode("1D-axes")
        .interactive()
        .reorderable()

    </script>
  </body>
</html>
